<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<canvas id="display" width="640px" height="320px" style="background-color: black;">
</canvas>
<script src="jquery-2.1.3.js" ></script>
<script src="chip8.js" ></script>
<script>
    var display = new Display();
    /*
    setTimeout(function() {
        display.writePixel(10,10);
        display.writePixel(11,10);
        display.writePixel(12,10);
        display.writePixel(14,10);
        display.writePixel(15,10);
        display.renderScreen();
        display.flush();
        setTimeout(function() {
            display.writePixel(10,11);
            display.writePixel(11,11);
            display.writePixel(12,11);
            display.writePixel(14,11);
            display.writePixel(15,11);
            display.renderScreen();
            display.flush();
            setTimeout(function() {
                display.writePixel(10,12);
                display.writePixel(11,12);
                display.writePixel(12,12);
                display.writePixel(14,12);
                display.writePixel(15,12);
                display.renderScreen();
                display.flush();
            }, 100 );
        }, 100 );
    }, 100 );
    */

    test = function(list) {
        setTimeout(function () {
            if (list.length == 0) return;
            elem = list[0];
            console.log(elem);
            list = list.slice(1,list.length);
            display.flush();
            display.writeBytes(-1, 1, elem[0]);
            display.writeBytes(-1, 2, elem[1]);
            display.writeBytes(-1, 3, elem[2]);
            display.writeBytes(-1, 4, elem[3]);
            display.writeBytes(-1, 5, elem[4]);
            display.renderScreen();
            if (list.length > 0) test(list);
        }, 500);
    }

    test([[0xF0,0x90,0x90,0x90,0xF0],
          [0x20,0x60,0x20,0x20,0x70],
          [0xF0,0x10,0xF0,0x80,0xF0],
          [0xF0,0x10,0xF0,0x10,0xF0],
          [0x90,0x90,0xF0,0x10,0x10],
          [0xF0,0x80,0xF0,0x10,0xF0],
          [0xF0,0x80,0xF0,0x90,0xF0],
          [0xF0,0x10,0x20,0x40,0x40],
          [0xF0,0x90,0xF0,0x90,0xF0],
          [0xF0,0x90,0xF0,0x10,0xF0],
          [0xF0,0x90,0xF0,0x90,0x90],
          [0xE0,0x90,0xE0,0x90,0xE0],
          [0xF0,0x80,0x80,0x80,0xF0],
          [0xE0,0x90,0x90,0x90,0xE0],
          [0xF0,0x80,0xF0,0x80,0xF0],
          [0xF0,0x80,0xF0,0x80,0x80]]);

</script>
</body>

</html>

